$(document).ready(function() {
  $('.best_in_place').best_in_place();
  
  var arrayBIP = $('span.best_in_place');
  for(var i = 0; i < arrayBIP.length; i++)
  {
  	$('#'+arrayBIP[i].id).attr('title','Click to edit');
  }
  
  $('.edit_experience').each(function()
  {
  	arrayId = $(this).attr("id").split('_');
  	var id = arrayId[2];
  	$('#'+$(this).attr("id"))
  	 .bind("ajax:complete", function(evt, xhr, status){
  	 	//alert(status);
  	 	//$('#errors'+id).html("Good");
  	 })
  	 .bind("ajax:error", function(evt, xhr, status, error)
  	 {
  	 	//alert(status);
  	 	try {
  	 	  errors = $.parseJSON(xhr.responseText);
  	 	}
  	 	catch(err) {
  	 	  errors = {message: "JSON Error"};
  	 	}
  	 	
  	 	errorText = "Error(s): ";
  	 	for(error in errors) {
  	 	  errorText += error+" "+errors[error]+" ";
  	 	}
  	 	
  	 	$('#errors'+id).html(errorText);
  	 })
  	;
  });
});

function displayEditForm(model,id) {
  $('#'+model+'_edit_line_'+id).show();
  $('#'+model+'_line_'+id).hide();
}

function hideEditForm(model,id) {
  $('#'+model+'_edit_line_'+id).hide();
  $('#'+model+'_line_'+id).show();  
}
